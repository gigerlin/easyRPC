(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.LS = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){

/*
  @author Gilles Gerlinger
  Copyright 2016. All rights reserved.
 */
var Remote, log, send;

module.exports = Remote = (function() {
  function Remote(options) {
    var ctx, fn, i, len, method, ref;
    ctx = {
      count: 0,
      uid: Math.random().toString().substring(2, 10),
      request: (options.url || location.origin) + "/" + options["class"]
    };
    ref = options.methods;
    fn = (function(_this) {
      return function(method) {
        return _this[method] = function() {
          return send(ctx.request, {
            method: method,
            args: [].slice.call(arguments),
            id: ctx.uid + "-" + (++ctx.count)
          });
        };
      };
    })(this);
    for (i = 0, len = ref.length; i < len; i++) {
      method = ref[i];
      fn(method);
    }
  }

  return Remote;

})();

send = function(request, msg) {
  var message;
  message = JSON.stringify(msg);
  log(msg.id + ": out " + message);
  return new Promise(function(resolve, reject) {
    return fetch(request, {
      headers: {
        'Content-Type': 'application/json; charset=utf-8'
      },
      method: 'post',
      body: message
    })["catch"](function(err) {
      log(msg.id + ": network error " + err);
      return reject(err);
    }).then(function(response) {
      if (response) {
        return response.json();
      }
    }).then(function(rep) {
      if (rep) {
        log(msg.id + ": in " + (JSON.stringify(rep)));
        if (rep.err) {
          return reject(rep.err);
        } else {
          return resolve(rep.rep);
        }
      }
    });
  });
};

log = function(text) {
  if (text.length > 127) {
    text = text.substring(0, 127) + ' ...';
  }
  return console.log(new Date().toISOString().replace('T', ' ').slice(0, 19), 'rpc', text);
};



},{}],2:[function(require,module,exports){
var Remote, remote;

Remote = require('./easyRPC');

remote = new Remote({
  "class": 'Employee',
  methods: ['getProfile', 'publish']
});

remote.getProfile('john').then(function(rep) {
  return console.log(rep);
})["catch"](function(err) {
  return console.log(err);
});

remote.publish().then(function(rep) {
  return console.log(rep);
})["catch"](function(err) {
  return console.log(err);
});



},{"./easyRPC":1}]},{},[2])(2)
});